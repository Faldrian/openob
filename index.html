<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>OpenOB by JamesHarrison</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">OpenOB</h1>
        <p class="header">The Open Outside Broadcast project for low-latency high-reliability broadcast audio</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/JamesHarrison/openob/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/JamesHarrison/openob/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/JamesHarrison/openob">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/JamesHarrison">JamesHarrison</a></p>


      </header>
      <section>
        <h2>Welcome to OpenOB</h2>

<p>The OpenOB project is a fast and simple way to get audio from A to B at high quality with excellent reliability and low latency. It is designed for broadcast use, such as for links from outside broadcast units to contribution units in the studio, or for getting audio from your studio to an FM, AM or DAB transmission site. </p>

<p>It aims to provide a feature-equivalent system comparable to commercial IP codecs.</p>

<h2>Getting Started</h2>

<p>Setting up an audio link is really simple. On an Ubuntu box (running, say, Ubuntu Studio 12.04), the following commands will get you up and running.</p>

<pre><code># install dependencies (for Ubuntu)
sudo apt-get install git python-gst0.10 python-redis \
  gstreamer0.10-plugins-base gstreamer0.10-plugins-bad \
  gstreamer0.10-plugins-bad-multiverse gstreamer0.10-plugins-good \
  gstreamer0.10-plugins-ugly gstreamer0.10-tools \
  python-gobject python-gobject-2 gstreamer0.10-alsa 
# only required on one end, typically the receiving system
sudo apt-get install redis-server
# now grab openob
git clone git://github.com/JamesHarrison/openob.git
cd openob
</code></pre>

<p>Configuration of links is done on the command line, to ease integration with monitoring systems like god or monit and quick reconfiguration.</p>

<p>There are two subcommands, rx and tx for receiver and transmitter respectively, each with their own options. </p>

<pre><code># For transmitter help
python openob-manager.py localhost name tx -h
usage: openob-manager config_host link_name tx [-h]
                                               [-a {alsa,jack,pulseaudio}]
                                               [-d DEVICE] [-e {pcm,celt}]
                                               [-b {16,24,32,48,64,96,128}]
                                               [-p PORT] [-j JITTER_BUFFER]
                                               receiver_host

positional arguments:
  receiver_host         The receiver for this transmitter. The machine at this
                        address must be running an rx-mode Manager for this
                        link name

optional arguments:
  -h, --help            show this help message and exit
  -a {alsa,jack,pulseaudio}, --audio_input {alsa,jack,pulseaudio}
                        The audio source type for this end of the link
  -d DEVICE, --device DEVICE
                        The ALSA audio device when in ALSA audio input mode
  -e {pcm,celt}, --encoding {pcm,celt}
                        The audio encoding type for this link; PCM for linear
                        audio (16-bit), CELT for encoded audio
  -b {16,24,32,48,64,96,128}, --bitrate {16,24,32,48,64,96,128}
                        Bitrate if using CELT (in kbit/s)
  -p PORT, --port PORT  The base port to use for audio transport. This port
                        must be accessible on the receiving host
  -j JITTER_BUFFER, --jitter_buffer JITTER_BUFFER
                        The size of the jitter buffer in milliseconds. Affects
                        latency; may be reduced to 5-10ms on fast reliable
                        networks, or increased for poor networks like 3G

# For receiver help
python openob-manager.py localhost name rx -h
usage: openob-manager config_host link_name rx [-h]
                                               [-a {alsa,jack,pulseaudio}]
                                               [-d DEVICE]

optional arguments:
  -h, --help            show this help message and exit
  -a {alsa,jack,pulseaudio}, --audio_output {alsa,jack,pulseaudio}
                        The audio output type for this end of the link
  -d DEVICE, --device DEVICE
                        The ALSA audio device when in ALSA audio output mode

</code></pre>

<p>As a minimal configuration you should be able to run the following (assuming you can access your sound cards via ALSA; typically this entails membership of the 'audio' group):</p>

<pre><code># On the transmitter
python openob-manager.py confighost test-link tx b-hostname
# On the receiver
python openob-manager.py confighost test-link rx
</code></pre>

<p>And you should have audio going from A to B! The links will try and keep themselves alive at all costs, and will report any issues to stdout/stderr. If the above doesn't work make sure your firewall is configured properly.</p>

<h2>What can it do?</h2>

<p>OpenOB can be used for speech or music content with CELT or PCM modes (PCM is effectively completely transparent, and suitable for feeding processors and encoders). You can run bidirectional links with a single install, and with multiple installs, you can run multiple transmission or receiver links on the same computer (using multiple sound cards or the JACK audio server), letting you use a single machine for contribution links from multiple sources. You can run links over mobile phone connections using CELT at low bitrates and a decent jitter buffer with acceptable quality for on-air usage, even for music content.</p>

<h3>What can't it do?</h3>

<p>Make you a nice mug of tea at 4AM after a late night at the studio repairing things. Sorry. This feature is slated for a future release.</p>

<h2>State of the Project</h2>

<p>The project is ongoing - proper end to end link management which includes automatic recovery of faults and monitoring of the links is the main thing missing from the project, but work is ongoing on making this happen.</p>

<p>The project is in active use; it's used at <a href="http://insanityradio.com/">Insanity Radio 103.2 FM</a> for a studio-transmitter link, and for outside broadcast contribution links. It is reliable and works well when managed carefully, but isn't quite yet idiot-proof.</p>

<p>It is being developed further by me (James Harrison) in my spare time; financial contributions to the project would be appreciated.</p>

<h3>Technical Notes</h3>

<p>The project uses the Real Time Protocol combined with either the CELT low-latency audio codec or straightforward PCM 16-bit packetizing. In the CELT mode, latency is as low as 5-10 milliseconds. In PCM mode, the link is as low-latency as your sound cards. This assumes a perfect network - a jitter buffer is usually required, of 5-10 milliseconds on most complex networks.</p>

<p>The core of the project uses the GStreamer framework for handling audio; Python is used for controlling GStreamer pipelines and monitoring things, along with the web interface.</p>

<h3>Gotchas</h3>

<p>Versions of GStreamer and codecs can vary significantly between OS versions; for fewer headaches, install the same operating system on both ends. Ubuntu Studio 12.04 is my current distro of choice for this sort of work, as it allows unimpeded access to the sound card via ALSA without modifications, and JACK also works out of the box.</p>

<h2>The To-Do List</h2>

<ul>
<li>Package up as a Python package so installation can be reduced to <code>easy_install openob</code>
</li>
<li>Write some tests to verify behaviour of links</li>
<li>Improve support of multiple sound cards/JACK client management</li>
<li>Measure end to end latency with a decent sound card (prerequisite: someone buys me two decent sound cards and lends me an audio analyser)</li>
</ul><h2>Real-World Users</h2>

<p>This list is new; if you're using OpenOB in the real world (or testing/developing with it/evaluating it), let me know so you can be added to the list (or just add yourself in a fork and throw in a pull request).</p>

<ul>
<li>
<a href="http://insanityradio.com">Insanity Radio 103.2 FM (UK Community Radio)</a> - Studio-Transmitter Link for FM, outside broadcasts from events</li>
</ul><h2>Credits</h2>

<p>OpenOB was developed by James Harrison for Insanity Radio. I couldn't have figured out a lot of stuff about how to get GStreamer and Python talking without some sample code from Alexandre Bourget. And of course, the GStreamer guys rock for managing to develop such an amazing toolkit for us developers.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
		
  </body>
</html>