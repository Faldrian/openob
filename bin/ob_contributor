$:.unshift File.dirname(__FILE__) + '/../lib'
require 'slop'
require 'openob'
require 'openob/contribution'
opts = Slop.parse :summary=>'OpenOB Contribution Link Tool', :banner=>"Usage: ob_contributor -H hostname -P port [options]", :help => true, :strict => true do
  on :H, :hostname, 'Specify the hostname of the endpoint', true, :required => true
  on :P, :port, 'Specify the port of the endpoint', true, :required=>true
  on :w, :webport, 'Port to run the web interface on', true, :required=>false, :default=>9000
  on :v, :verbose, 'Print info-level verbose output', :default=>false
  on :d, :debug, 'Print debug-level verbose output', :default=>false
  on :V, :version, 'Print the version' do
    puts "OpenOB version "+OpenOB::VERSION
    exit
  end
end
OpenOB::LOGGER.level = Logger::WARN
OpenOB::LOGGER.level = Logger::INFO if opts.verbose?
OpenOB::LOGGER.level = Logger::DEBUG if opts.debug?
OpenOB::Contribution.setup(opts.to_hash)